---
- name: Playbook para instalar la pila lamp
  hosts: front
  become: yes

  tasks:

  - name: Añadimos las variables
    ansible.builtin.include_vars:
      ./variables.yml

  - name: Actualizar los repositorios
    apt:
      update_cache: yes

  - name: Instalar el servidor web Apache
    apt:
      name: apache2
      state: present

  - name: Instalar PHP 
    apt:
      name: "{{php_paquetes}}"
      state: present

  - name: Borramos el archivo de index.html que está en el directorio /var/www/html
    file:
      path: /var/www/html/index.html
      state: absent

  - name: Reiniciamos el servidor apache
    service:
      name: apache2
      state: restarted 